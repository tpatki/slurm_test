<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                        "http://www.w3.org/TR/REC-html40/loose.dtd">

<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="keywords" content="Simple Linux Utility for Resource Management, SLURM, resource management,
Linux clusters, high-performance computing, Livermore Computing">
<meta name="description" content="Simple Linux Utility for Resource Management">
<title>Simple Linux Utility for Resource Management</title>
<link href="linuxstyles.css" rel="stylesheet" type="text/css">
<link href="slurmstyles.css" rel="stylesheet" type="text/css">
</head>

<body><div id="container">

<div id="banner">
<img src="slurm_banner.gif" width="800" height="100" border="0" usemap="#Map">
</div>

<div id="navigation">

<h2><a href="slurm.html" class="nav">Home</a></h2>

<h2>About</h2>
<ul>
	  <li><a href="overview.html" class="nav">Overview</a></li>
	  <li><a href="meetings.html" class="nav">Meetings</a></li>
	  <li><a href="news.html" class="nav">What's New</a></li>
	  <li><a href="publications.html" class="nav">Publications</a></li>
	  <li><a href="testimonials.html" class="nav">Testimonials</a></li>
	  <li><a href="team.html" class="nav">SLURM Team</a></li>
</ul>
<h2>Using</h2>
<ul>
	  <li><a href="documentation.html" class="nav">Documentation</a></li>
	  <li><a href="faq.html" class="nav">FAQ</a></li>
	  <li><a href="help.html" class="nav">Getting Help</a></li>
	  <li><a href="mail.html"  class="nav">Mailing Lists</a></p>
</ul>
<h2>Installing</h2>
<ul>
	  <li><a href="platforms.html" class="nav">Platforms</a></li>
	  <li><a href="download.html" class="nav">Download</a></li>
	  <li><a href="download.html#related" class="nav">Related Software</a></li>
	  <li><a href="quickstart_admin.html" class="nav">Guide</a></li>
</ul>
</div>

<div id="content">


<H1>sbatch</H1>
Section: SLURM Commands (1)<BR>Updated: SLURM 2.3<BR><A HREF="#index">Index</A>

<P>
<A NAME="lbAB">&nbsp;</A>
<a id="SECTION_NAME"></a>
<H2>NAME</H2>

sbatch - Submit a batch script to SLURM.
<P>
<A NAME="lbAC">&nbsp;</A>
<a id="SECTION_SYNOPSIS"></a>
<H2>SYNOPSIS</H2>

sbatch [<I>options</I>] <I>script</I> [<I>args</I>...]
<P>
<A NAME="lbAD">&nbsp;</A>
<a id="SECTION_DESCRIPTION"></a>
<H2>DESCRIPTION</H2>

sbatch submits a batch script to SLURM.  The batch script may be given to
sbatch through a file name on the command line, or if no file name is specified,
sbatch will read in a script from standard input. The batch script may contain
options preceded with &quot;#SBATCH&quot; before any executable commands in the script.
<P>
sbatch exits immediately after the script is successfully transferred to the
SLURM controller and assigned a SLURM job ID.  The batch script is not
necessarily granted resources immediately, it may sit in the queue of pending
jobs for some time before its required resources become available.
<P>
By default both standard output and standard error are directed to a file of
the name &quot;slurm-%j.out&quot;, where the &quot;%j&quot; is replaced with the job allocation
number.
<P>
When the job allocation is finally granted for the batch script, SLURM
runs a single copy of the batch script on the first node in the set of
allocated nodes.
<P>
The following document describes the the influence of various options on the 
allocation of cpus to jobs and tasks. 
<BR>

<A HREF="http://www.schedmd.com/slurmdocs/cpu_management.html">http://www.schedmd.com/slurmdocs/cpu_management.html</A>
<P>
<A NAME="lbAE">&nbsp;</A>
<a id="SECTION_OPTIONS"></a>
<H2>OPTIONS</H2>

<P>

<P>
<DL COMPACT>
<a id="OPT_account"></a>
<DT><B>-A</B>, <B>--account</B>=&lt;<I>account</I>&gt;<DD>
Charge resources used by this job to specified account.
The <I>account</I> is an arbitrary string. The account name may
be changed after job submission using the <B>scontrol</B>
command.
<P>
<a id="OPT_acctg-freq"></a>
<DT><B>--acctg-freq</B>=&lt;<I>seconds</I>&gt;<DD>
Define the job accounting sampling interval.
This can be used to override the <I>JobAcctGatherFrequency</I> parameter in SLURM's
configuration file, <I>slurm.conf</I>.
A value of zero disables the periodic job sampling and provides accounting
information only on job termination (reducing SLURM interference with the job).
<P>
<a id="OPT_extra-node-info"></a>
<DT><B>-B</B> <B>--extra-node-info</B>=&lt;<I>sockets</I>[:<I>cores</I>[:<I>threads</I>]]&gt;<DD>
Request a specific allocation of resources with details as to the
number and type of computational resources within a cluster:
number of sockets (or physical processors) per node,
cores per socket, and threads per core.
The total amount of resources being requested is the product of all of
the terms.
Each value specified is considered a minimum.
An asterisk (*) can be used as a placeholder indicating that all available
resources of that type are to be utilized.
As with nodes, the individual levels can also be specified in separate
options if desired:
<PRE>
    <B>--sockets-per-node</B>=&lt;<I>sockets</I>&gt;
    <B>--cores-per-socket</B>=&lt;<I>cores</I>&gt;
    <B>--threads-per-core</B>=&lt;<I>threads</I>&gt;
</PRE>

If task/affinity plugin is enabled, then specifying an allocation in this
manner also sets a default <B>--cpu_bind</B> option of <I>threads</I>
if the <B>-B</B> option specifies a thread count, otherwise an option of
<I>cores</I> if a core count is specified, otherwise an option of <I>sockets</I>.
If SelectType is configured to select/cons_res, it must have a parameter of
CR_Core, CR_Core_Memory, CR_Socket, or CR_Socket_Memory for this option
to be honored.
This option is not supported on BlueGene systems (select/bluegene plugin
is configured).
If not specified, the scontrol show job will display 'ReqS:C:T=*:*:*'.
<P>
<a id="OPT_begin"></a>
<DT><B>--begin</B>=&lt;<I>time</I>&gt;<DD>
Submit the batch script to the SLURM controller immediately, like normal, but
tell the controller to defer the allocation of the job until the specified time.
<P>
Time may be of the form <I>HH:MM:SS</I> to run a job at
a specific time of day (seconds are optional).
(If that time is already past, the next day is assumed.)
You may also specify <I>midnight</I>, <I>noon</I>, or
<I>teatime</I> (4pm) and you can have a time-of-day suffixed
with <I>AM</I> or <I>PM</I> for running in the morning or the evening.
You can also say what day the job will be run, by specifying
a date of the form <I>MMDDYY</I> or <I>MM/DD/YY</I>
<I>YYYY-MM-DD</I>. Combine date and time using the following
format <I>YYYY-MM-DD[THH:MM[:SS]]</I>. You can also
give times like <I>now + count time-units</I>, where the time-units
can be <I>seconds</I> (default), <I>minutes</I>, <I>hours</I>,
<I>days</I>, or <I>weeks</I> and you can tell SLURM to run
the job today with the keyword <I>today</I> and to run the
job tomorrow with the keyword <I>tomorrow</I>.
The value may be changed after job submission using the
<B>scontrol</B> command.
For example:
<PRE>
   --begin=16:00
   --begin=now+1hour
   --begin=now+60           (seconds by default)
   --begin=2010-01-20T12:34:00
</PRE>

<P>
<DL COMPACT><DT><DD>
<P>

Notes on date/time specifications:
<BR>&nbsp;-&nbsp;Although&nbsp;the&nbsp;'seconds'&nbsp;field&nbsp;of&nbsp;the&nbsp;HH:MM:SS&nbsp;time&nbsp;specification&nbsp;is
allowed by the code, note that the poll time of the SLURM scheduler
is not precise enough to guarantee dispatch of the job on the exact
second.  The job will be eligible to start on the next poll
following the specified time. The exact poll interval depends on the
SLURM scheduler (e.g., 60 seconds with the default sched/builtin).
<BR>&nbsp;-&nbsp;If&nbsp;no&nbsp;time&nbsp;(HH:MM:SS)&nbsp;is&nbsp;specified,&nbsp;the&nbsp;default&nbsp;is&nbsp;(00:00:00).
<BR>&nbsp;-&nbsp;If&nbsp;a&nbsp;date&nbsp;is&nbsp;specified&nbsp;without&nbsp;a&nbsp;year&nbsp;(e.g.,&nbsp;MM/DD)&nbsp;then&nbsp;the&nbsp;current
year is assumed, unless the combination of MM/DD and HH:MM:SS has
already passed for that year, in which case the next year is used.
</DL>

<P>
<a id="OPT_checkpoint"></a>
<DT><B>--checkpoint</B>=&lt;<I>time</I>&gt;<DD>
Specifies the interval between creating checkpoints of the job step.
By default, the job step will have no checkpoints created.
Acceptable time formats include &quot;minutes&quot;, &quot;minutes:seconds&quot;,
&quot;hours:minutes:seconds&quot;, &quot;days-hours&quot;, &quot;days-hours:minutes&quot; and
&quot;days-hours:minutes:seconds&quot;.
<P>
<a id="OPT_checkpoint-dir"></a>
<DT><B>--checkpoint-dir</B>=&lt;<I>directory</I>&gt;<DD>
Specifies the directory into which the job or job step's checkpoint should
be written (used by the checkpoint/blcrm and checkpoint/xlch plugins only).
The default value is the current working directory.
Checkpoint files will be of the form &quot;&lt;job_id&gt;.ckpt&quot; for jobs
and &quot;&lt;job_id&gt;.&lt;step_id&gt;.ckpt&quot; for job steps.
<P>
<a id="OPT_comment"></a>
<DT><B>--comment</B>=&lt;<I>string</I>&gt;<DD>
An arbitrary comment enclosed in double quotes if using spaces or some
special characters.
<P>
<a id="OPT_constraint"></a>
<DT><B>-C</B>, <B>--constraint</B>=&lt;<I>list</I>&gt;<DD>
Specify a list of constraints.
The constraints are features that have been assigned to the nodes by
the slurm administrator.
The <I>list</I> of constraints may include multiple features separated
by ampersand (AND) and/or vertical bar (OR) operators.
For example: <B>--constraint=&quot;opteron&amp;video&quot;</B> or
<B>--constraint=&quot;fast|faster&quot;</B>.
In the first example, only nodes having both the feature &quot;opteron&quot; AND
the feature &quot;video&quot; will be used.
There is no mechanism to specify that you want one node with feature
&quot;opteron&quot; and another node with feature &quot;video&quot; in case no
node has both features.
If only one of a set of possible options should be used for all allocated
nodes, then use the OR operator and enclose the options within square brackets.
For example: &quot;<B>--constraint=[rack1|rack2|rack3|rack4]&quot;</B> might
be used to specify that all nodes must be allocated on a single rack of
the cluster, but any of those four racks can be used.
A request can also specify the number of nodes needed with some feature
by appending an asterisk and count after the feature name.
For example &quot;<B>sbatch --nodes=16 --constraint=graphics*4 ...&quot;</B>
indicates that the job requires 16 nodes and that at least four of those
nodes must have the feature &quot;graphics.&quot;
Constraints with node counts may only be combined with AND operators.
If no nodes have the requested features, then the job will be rejected
by the slurm job manager.
<P>
<a id="OPT_contiguous"></a>
<DT><B>--contiguous</B><DD>
If set, then the allocated nodes must form a contiguous set.
Not honored with the <B>topology/tree</B> or <B>topology/3d_torus</B>
plugins, both of which can modify the node ordering.
<P>
<a id="OPT_cores-per-socket"></a>
<DT><B>--cores-per-socket</B>=&lt;<I>cores</I>&gt;<DD>
Restrict node selection to nodes with at least the specified number of
cores per socket.  See additional information under <B>-B</B> option
above when task/affinity plugin is enabled.
<P>
<a id="OPT_cpu_bind"></a>
<DT><B>--cpu_bind</B>=[{<I>quiet,verbose</I>},]<I>type</I><DD>
Bind tasks to CPUs. Used only when the task/affinity plugin is enabled.
The configuration parameter <B>TaskPluginParam</B> may override these options.
For example, if <B>TaskPluginParam</B> is configured to bind to cores,
your job will not be able to bind tasks to sockets.
NOTE: To have SLURM always report on the selected CPU binding for all
commands executed in a shell, you can enable verbose mode by setting
the SLURM_CPU_BIND environment variable value to &quot;verbose&quot;.
<P>
The following informational environment variables are set when <B>--cpu_bind</B>
is in use:
<PRE>
        SLURM_CPU_BIND_VERBOSE
        SLURM_CPU_BIND_TYPE
        SLURM_CPU_BIND_LIST
</PRE>

<P>
See the <B>ENVIRONMENT VARIABLE</B> section for a more detailed description
of the individual SLURM_CPU_BIND* variables.
<P>
When using <B>--cpus-per-task</B> to run multithreaded tasks, be aware that
CPU binding is inherited from the parent of the process.  This means that
the multithreaded task should either specify or clear the CPU binding
itself to avoid having all threads of the multithreaded task use the same
mask/CPU as the parent.  Alternatively, fat masks (masks which specify more
than one allowed CPU) could be used for the tasks in order to provide
multiple CPUs for the multithreaded tasks.
<P>
By default, a job step has access to every CPU allocated to the job.
To ensure that distinct CPUs are allocated to each job step, use the
<B>--exclusive</B> option.
<P>
If the job step allocation includes an allocation with a number of
sockets, cores, or threads equal to the number of tasks to be started
then the tasks will by default be bound to the appropriate resources.
Disable this mode of operation by explicitly setting &quot;--cpu-bind=none&quot;.
<P>
Note that a job step can be allocated different numbers of CPUs on each node
or be allocated CPUs not starting at location zero. Therefore one of the
options which automatically generate the task binding is recommended.
Explicitly specified masks or bindings are only honored when the job step
has been allocated every available CPU on the node.
<P>
Binding a task to a NUMA locality domain means to bind the task to the set of
CPUs that belong to the NUMA locality domain or &quot;NUMA node&quot;.
If NUMA locality domain options are used on systems with no NUMA support, then
each socket is considered a locality domain.
<P>
Supported options include:

<DL COMPACT><DT><DD>
<DL COMPACT>
<a id="OPT_q[uiet]"></a>
<DT><B>q[uiet]</B>

<DD>
Quietly bind before task runs (default)
<a id="OPT_v[erbose]"></a>
<DT><B>v[erbose]</B>

<DD>
Verbosely report binding before task runs
<a id="OPT_no[ne]"></a>
<DT><B>no[ne]</B>

<DD>
Do not bind tasks to CPUs (default)
<a id="OPT_rank"></a>
<DT><B>rank</B>

<DD>
Automatically bind by task rank.
Task zero is bound to socket (or core or thread) zero, etc.
Not supported unless the entire node is allocated to the job.
<a id="OPT_map_cpu:&lt;list&gt;"></a>
<DT><B>map_cpu:&lt;list&gt;</B>

<DD>
Bind by mapping CPU IDs to tasks as specified
where &lt;list&gt; is &lt;cpuid1&gt;,&lt;cpuid2&gt;,...&lt;cpuidN&gt;.
CPU IDs are interpreted as decimal values unless they are preceded
with '0x' in which case they are interpreted as hexadecimal values.
Not supported unless the entire node is allocated to the job.
<a id="OPT_mask_cpu:&lt;list&gt;"></a>
<DT><B>mask_cpu:&lt;list&gt;</B>

<DD>
Bind by setting CPU masks on tasks as specified
where &lt;list&gt; is &lt;mask1&gt;,&lt;mask2&gt;,...&lt;maskN&gt;.
CPU masks are <B>always</B> interpreted as hexadecimal values but can be
preceded with an optional '0x'.
<a id="OPT_sockets"></a>
<DT><B>sockets</B>

<DD>
Automatically generate masks binding tasks to sockets.
Only the CPUs on the socket which have been allocated to the job will be used.
If the number of tasks differs from the number of allocated sockets
this can result in sub-optimal binding.
<a id="OPT_cores"></a>
<DT><B>cores</B>

<DD>
Automatically generate masks binding tasks to cores.
If the number of tasks differs from the number of allocated cores
this can result in sub-optimal binding.
<a id="OPT_threads"></a>
<DT><B>threads</B>

<DD>
Automatically generate masks binding tasks to threads.
If the number of tasks differs from the number of allocated threads
this can result in sub-optimal binding.
<a id="OPT_ldoms"></a>
<DT><B>ldoms</B>

<DD>
Automatically generate masks binding tasks to NUMA locality domains.
If the number of tasks differs from the number of allocated locality domains
this can result in sub-optimal binding.
<a id="OPT_help"></a>
<DT><B>help</B>

<DD>
Show this help message
</DL>
</DL>

<P>
<a id="OPT_cpus-per-task"></a>
<DT><B>-c</B>, <B>--cpus-per-task</B>=&lt;<I>ncpus</I>&gt;<DD>
Advise the SLURM controller that ensuing job steps will require <I>ncpus</I>
number of processors per task.  Without this option, the controller will
just try to allocate one processor per task.
<P>
For instance,
consider an application that has 4 tasks, each requiring 3 processors.  If our
cluster is comprised of quad-processors nodes and we simply ask for
12 processors, the controller might give us only 3 nodes.  However, by using
the --cpus-per-task=3 options, the controller knows that each task requires
3 processors on the same node, and the controller will grant an allocation
of 4 nodes, one for each of the 4 tasks.
<P>
<a id="OPT_dependency"></a>
<DT><B>-d</B>, <B>--dependency</B>=&lt;<I>dependency_list</I>&gt;<DD>
Defer the start of this job until the specified dependencies have been
satisfied completed.
&lt;<I>dependency_list</I>&gt; is of the form
&lt;<I>type:job_id[:job_id][,type:job_id[:job_id]]</I>&gt;.
Many jobs can share the same dependency and these jobs may even belong to
different  users. The  value may be changed after job submission using the
scontrol command.

<DL COMPACT><DT><DD>
<DL COMPACT>
<a id="OPT_after:job_id[:jobid...]"></a>
<DT><B>after:job_id[:jobid...]</B><DD>
This job can begin execution after the specified jobs have begun
execution.
<a id="OPT_afterany:job_id[:jobid...]"></a>
<DT><B>afterany:job_id[:jobid...]</B><DD>
This job can begin execution after the specified jobs have terminated.
<a id="OPT_afternotok:job_id[:jobid...]"></a>
<DT><B>afternotok:job_id[:jobid...]</B><DD>
This job can begin execution after the specified jobs have terminated
in some failed state (non-zero exit code, node failure, timed out, etc).
<a id="OPT_afterok:job_id[:jobid...]"></a>
<DT><B>afterok:job_id[:jobid...]</B><DD>
This job can begin execution after the specified jobs have successfully
executed (ran to completion with an exit code of zero).
<a id="OPT_expand:job_id"></a>
<DT><B>expand:job_id</B><DD>
Resources allocated to this job should be used to expand the specified job.
The job to expand must share the same QOS (Quality of Service) and partition.
Gang scheduling of resources in the partition is also not supported.
<a id="OPT_singleton"></a>
<DT><B>singleton</B><DD>
This job can begin execution after any previously launched jobs
sharing the same job name and user have terminated.
</DL>
</DL>

<P>
<a id="OPT_workdir"></a>
<DT><B>-D</B>, <B>--workdir</B>=&lt;<I>directory</I>&gt;<DD>
Set the working directory of the batch script to <I>directory</I> before
it is executed.
<P>
<a id="OPT_error"></a>
<DT><B>-e</B>, <B>--error</B>=&lt;<I>filename pattern</I>&gt;<DD>
Instruct SLURM to connect the batch script's standard error directly to the
file name specified in the &quot;<I>filename pattern</I>&quot;.
By default both standard output and standard error are directed to a file of
the name &quot;slurm-%j.out&quot;, where the &quot;%j&quot; is replaced with the job allocation
number.
See the <B>--input</B> option for filename specification options.
<P>
<a id="OPT_exclusive"></a>
<DT><B>--exclusive</B><DD>
The job allocation can not share nodes with other running jobs.
This is the opposite of --share, whichever option is seen last
on the command line will be used. The default shared/exclusive
behavior depends on system configuration and the partition's <B>Shared</B>
option takes precedence over the job's option.
<P>
<a id="OPT_export"></a>
<DT><B>--export</B>=&lt;<I>environment variables | ALL | NONE</I>&gt;<DD>
Identify which environment variables are propagated to the batch job.
Multiple environment variable names should be comma separated.
Environment variable names may be specified to propagate the current 
value of those variables (e.g. &quot;--export=EDITOR&quot;) or specific values
for the variables may be exported (e.g.. &quot;--export=EDITOR=/bin/vi&quot;).
This option particularly important for jobs that are submitted on one cluster
and execute on a different cluster (e.g. with different paths). By default all
environment variables are propagaged. If the argument is <I>NONE</I> or
specific environment variable names, then the <B>--get-user-env</B>
option will implicitly be set to load other environment variables based upon
the user's configuration on the cluster which executes the job.
<P>
<a id="OPT_nodefile"></a>
<DT><B>-F</B>, <B>--nodefile</B>=&lt;<I>node file</I>&gt;<DD>
Much like --nodelist, but the list is contained in a file of name
<I>node file</I>.  The node names of the list may also span multiple lines
in the file.    Duplicate node names in the file will be ignored.
The order of the node names in the list is not important; the node names
will be sorted by SLURM.
<P>
<a id="OPT_get-user-env"></a>
<DT><B>--get-user-env</B>[=<I>timeout</I>][<I>mode</I>]<DD>
This option will tell sbatch to retrieve the
login environment variables for the user specified in the <B>--uid</B> option.
The environment variables are retrieved by running something of this sort
&quot;su - &lt;username&gt; -c /usr/bin/env&quot; and parsing the output.
Be aware that any environment variables already set in sbatch's environment
will take precedence over any environment variables in the user's
login environment. Clear any environment variables before calling sbatch
that you do not want propagated to the spawned program.
The optional <I>timeout</I> value is in seconds. Default value is 8 seconds.
The optional <I>mode</I> value control the &quot;su&quot; options.
With a <I>mode</I> value of &quot;S&quot;, &quot;su&quot; is executed without the &quot;-&quot; option.
With a <I>mode</I> value of &quot;L&quot;, &quot;su&quot; is executed with the &quot;-&quot; option,
replicating the login environment.
If <I>mode</I> not specified, the mode established at SLURM build time
is used.
Example of use include &quot;--get-user-env&quot;, &quot;--get-user-env=10&quot;
&quot;--get-user-env=10L&quot;, and &quot;--get-user-env=S&quot;.
This option was originally created for use by Moab.
<P>
<a id="OPT_gid"></a>
<DT><B>--gid</B>=&lt;<I>group</I>&gt;<DD>
If <B>sbatch</B> is run as root, and the <B>--gid</B> option is used,
submit the job with <I>group</I>'s group access permissions.  <I>group</I>
may be the group name or the numerical group ID.
<P>
<a id="OPT_gres"></a>
<DT><B>--gres</B>=&lt;<I>list</I>&gt;<DD>
Specifies a comma delimited list of generic consumable resources.
The format of each entry on the list is &quot;name[:count[*cpu]]&quot;.
The name is that of the consumable resource.
The count is the number of those resources with a default value of 1.
The specified resources will be allocated to the job on each node
allocated unless &quot;*cpu&quot; is appended, in which case the resources
will be allocated on a per cpu basis.
The available generic consumable resources is configurable by the system
administrator.
A list of available generic consumable resources will be printed and the
command will exit if the option argument is &quot;help&quot;.
Examples of use include &quot;--gres=gpus:2*cpu,disk=40G&quot; and &quot;--gres=help&quot;.
<P>
<a id="OPT_hold"></a>
<DT><B>-H, --hold</B><DD>
Specify the job is to be submitted in a held state (priority of zero).
A held job can now be released using scontrol to reset its priority
(e.g. &quot;<I>scontrol release &lt;job_id&gt;</I>&quot;).
<P>
<a id="OPT_help"></a>
<DT><B>-h</B>, <B>--help</B><DD>
Display help information and exit.
<P>
<a id="OPT_hint"></a>
<DT><B>--hint</B>=&lt;<I>type</I>&gt;<DD>
Bind tasks according to application hints
<DL COMPACT><DT><DD>
<DL COMPACT>
<a id="OPT_compute_bound"></a>
<DT><B>compute_bound</B>

<DD>
Select settings for compute bound applications:
use all cores in each socket, one thread per core
<a id="OPT_memory_bound"></a>
<DT><B>memory_bound</B>

<DD>
Select settings for memory bound applications:
use only one core in each socket, one thread per core
<a id="OPT_[no]multithread"></a>
<DT><B>[no]multithread</B>

<DD>
[don't] use extra threads with in-core multi-threading
which can benefit communication intensive applications
<a id="OPT_help"></a>
<DT><B>help</B>

<DD>
show this help message
</DL>
</DL>

<P>
<a id="OPT_immediate"></a>
<DT><B>-I</B>, <B>--immediate</B><DD>
The batch script will only be submitted to the controller if the resources
necessary to grant its job allocation are immediately available.  If the
job allocation will have to wait in a queue of pending jobs, the batch script
will not be submitted.
<P>
<a id="OPT_input"></a>
<DT><B>-i</B>, <B>--input</B>=&lt;<I>filename pattern</I>&gt;<DD>
Instruct SLURM to connect the batch script's standard input
directly to the file name specified in the &quot;<I>filename pattern</I>&quot;.
<P>
By default, &quot;/dev/null&quot; is open on the batch script's standard input and both
standard output and standard error are directed to a file of the name
&quot;slurm-%j.out&quot;, where the &quot;%j&quot; is replaced with the job allocation number, as
described below.
<P>
The filename pattern may contain one or more replacement symbols, which are
a percent sign &quot;%&quot; followed by a letter (e.g. %j).
<P>
Supported replacement symbols are:

<DL COMPACT><DT><DD>
<DL COMPACT>
<a id="OPT_%j"></a>
<DT><B>%j</B><DD>
Job allocation number.

<a id="OPT_%N"></a>
<DT><B>%N</B><DD>
Node name.  Only one file is created, so %N will be replaced by the name of the
first node in the job, which is the one that runs the script.
</DL>
</DL>

<P>
<a id="OPT_job-name"></a>
<DT><B>-J</B>, <B>--job-name</B>=&lt;<I>jobname</I>&gt;<DD>
Specify a name for the job allocation. The specified name will appear along with
the job id number when querying running jobs on the system. The default
is the name of the batch script, or just &quot;sbatch&quot; if the script is
read on sbatch's standard input.
<P>
<a id="OPT_jobid"></a>
<DT><B>--jobid</B>=&lt;<I>jobid</I>&gt;<DD>
Allocate resources as the specified job id.
NOTE: Only valid for user root.
<P>
<a id="OPT_no-kill"></a>
<DT><B>-k</B>, <B>--no-kill</B><DD>
Do not automatically terminate a job of one of the nodes it has been
allocated fails.  The user will assume the responsibilities for fault-tolerance
should a node fail.  When there is a node failure, any active job steps (usually
MPI jobs) on that node will almost certainly suffer a fatal error, but with
--no-kill, the job allocation will not be revoked so the user may launch
new job steps on the remaining nodes in their allocation.
<P>
By default SLURM terminates the entire job allocation if any node fails in its
range of allocated nodes.
<P>
<a id="OPT_licenses"></a>
<DT><B>-L</B>, <B>--licenses</B>=&lt;<B>license</B>&gt;<DD>
Specification of licenses (or other resources available on all
nodes of the cluster) which must be allocated to this job.
License names can be followed by an asterisk and count
(the default count is one).
Multiple license names should be comma separated (e.g.
&quot;--licenses=foo*4,bar&quot;).
<P>
<a id="OPT_clusters"></a>
<DT><B>-M</B>, <B>--clusters</B>=&lt;<I>string</I>&gt;<DD>
Clusters to issue commands to.  Multiple cluster names may be comma separated.
The job will be submitted to the one cluster providing the earliest expected
job initiation time. The default value is the current cluster. A value of
aq<I>all</I>' will query to run on all clusters.  Note the
<B>--export</B> option to control environment variables exported
between clusters.
<P>
<a id="OPT_distribution"></a>
<DT><B>-m</B>, <B>--distribution</B>=<DD>
&lt;<I>block</I>|<I>cyclic</I>|<I>arbitrary</I>|<I>plane=&lt;options&gt;</I>[:<I>block</I>|<I>cyclic</I>]&gt;
<P>
Specify alternate distribution methods for remote processes.
In sbatch, this only sets environment variables that will be used by
subsequent srun requests.
This option controls the assignment of tasks to the nodes on which
resources have been allocated, and the distribution of those resources
to tasks for binding (task affinity). The first distribution
method (before the &quot;:&quot;) controls the distribution of resources across
nodes. The optional second distribution method (after the &quot;:&quot;)
controls the distribution of resources across sockets within a node.
Note that with select/cons_res, the number of cpus allocated on each
socket and node may be different. Refer to
the <a href="mc_support.html">mc_support</a> document
for more information on resource allocation, assignment of tasks to
nodes, and binding of tasks to CPUs.
<DL COMPACT><DT><DD>
<P>
First distribution method:
<DL COMPACT>
<a id="OPT_block"></a>
<DT><B>block</B>

<DD>
The block distribution method will distribute tasks to a node such
that consecutive tasks share a node. For example, consider an
allocation of three nodes each with two cpus. A four-task block
distribution request will distribute those tasks to the nodes with
tasks one and two on the first node, task three on the second node,
and task four on the third node.  Block distribution is the default
behavior if the number of tasks exceeds the number of allocated nodes.
<a id="OPT_cyclic"></a>
<DT><B>cyclic</B>

<DD>
The cyclic distribution method will distribute tasks to a node such
that consecutive tasks are distributed over consecutive nodes (in a
round-robin fashion). For example, consider an allocation of three
nodes each with two cpus. A four-task cyclic distribution request
will distribute those tasks to the nodes with tasks one and four on
the first node, task two on the second node, and task three on the
third node.
Note that when SelectType is select/cons_res, the same number of CPUs
may not be allocated on each node. Task distribution will be
round-robin among all the nodes with CPUs yet to be assigned to tasks.
Cyclic distribution is the default behavior if the number
of tasks is no larger than the number of allocated nodes.
<a id="OPT_plane"></a>
<DT><B>plane</B>

<DD>
The tasks are distributed in blocks of a specified size.  The options
include a number representing the size of the task block.  This is
followed by an optional specification of the task distribution scheme
within a block of tasks and between the blocks of tasks.  For more
details (including examples and diagrams), please see
<BR>

the <a href="mc_support.html">mc_support</a> document
<BR>

and
<BR>

<A HREF="http://www.schedmd.com/slurmdocs/dist_plane.html">http://www.schedmd.com/slurmdocs/dist_plane.html</A>
<a id="OPT_arbitrary"></a>
<DT><B>arbitrary</B>

<DD>
The arbitrary method of distribution will allocate processes in-order
as listed in file designated by the environment variable
SLURM_HOSTFILE.  If this variable is listed it will override any
other method specified.  If not set the method will default to block.
Inside the hostfile must contain at minimum the number of hosts
requested and be one per line or comma separated.  If specifying a
task count (<B>-n</B>, <B>--ntasks</B>=&lt;<I>number</I>&gt;), your tasks
will be laid out on the nodes in the order of the file.
<DT><DD>
Second distribution method:
<a id="OPT_block"></a>
<DT><B>block</B>

<DD>
The block distribution method will distribute tasks to sockets such
that consecutive tasks share a socket.
<a id="OPT_cyclic"></a>
<DT><B>cyclic</B>

<DD>
The cyclic distribution method will distribute tasks to sockets such
that consecutive tasks are distributed over consecutive sockets (in a
round-robin fashion).
</DL>
</DL>

<P>
<a id="OPT_mail-type"></a>
<DT><B>--mail-type</B>=&lt;<I>type</I>&gt;<DD>
Notify user by email when certain event types occur.
Valid <I>type</I> values are BEGIN, END, FAIL, REQUEUE, and ALL (any state
change). The user to be notified is indicated with <B>--mail-user</B>.
<P>
<a id="OPT_mail-user"></a>
<DT><B>--mail-user</B>=&lt;<I>user</I>&gt;<DD>
User to receive email notification of state changes as defined by
<B>--mail-type</B>.
The default value is the submitting user.
<P>
<a id="OPT_mem"></a>
<DT><B>--mem</B>=&lt;<I>MB</I>&gt;<DD>
Specify the real memory required per node in MegaBytes.
Default value is <B>DefMemPerNode</B> and the maximum value is
<B>MaxMemPerNode</B>. If configured, both of parameters can be
seen using the <B>scontrol show config</B> command.
This parameter would generally be used if whole nodes
are allocated to jobs (<B>SelectType=select/linear</B>).
Also see <B>--mem-per-cpu</B>.
<B>--mem</B> and <B>--mem-per-cpu</B> are mutually exclusive.
<P>
<a id="OPT_mem-per-cpu"></a>
<DT><B>--mem-per-cpu</B>=&lt;<I>MB</I>&gt;<DD>
Mimimum memory required per allocated CPU in MegaBytes.
Default value is <B>DefMemPerCPU</B> and the maximum value is <B>MaxMemPerCPU</B>
(see exception below). If configured, both of parameters can be
seen using the <B>scontrol show config</B> command.
Note that if the job's <B>--mem-per-cpu</B> value exceeds the configured
<B>MaxMemPerCPU</B>, then the user's limit will be treated as a memory limit
per task; <B>--mem-per-cpu</B> will be reduced to a value no larger than
<B>MaxMemPerCPU</B>; <B>--cpus-per-task</B> will be set and value of 
<B>--cpus-per-task</B> multiplied by the new <B>--mem-per-cpu</B>
value will equal the original <B>--mem-per-cpu</B> value specified by
the user.
This parameter would generally be used if individual processors
are allocated to jobs (<B>SelectType=select/cons_res</B>).
Also see <B>--mem</B>.
<B>--mem</B> and <B>--mem-per-cpu</B> are mutually exclusive.
<P>
<a id="OPT_mem_bind"></a>
<DT><B>--mem_bind</B>=[{<I>quiet,verbose</I>},]<I>type</I><DD>
Bind tasks to memory. Used only when the task/affinity plugin is enabled
and the NUMA memory functions are available.
<B>Note that the resolution of CPU and memory binding
may differ on some architectures.</B> For example, CPU binding may be performed
at the level of the cores within a processor while memory binding will
be performed at the level of nodes, where the definition of &quot;nodes&quot;
may differ from system to system. <B>The use of any type other than
&quot;none&quot; or &quot;local&quot; is not recommended.</B>
If you want greater control, try running a simple test code with the
options &quot;--cpu_bind=verbose,none --mem_bind=verbose,none&quot; to determine
the specific configuration.
<P>
NOTE: To have SLURM always report on the selected memory binding for
all commands executed in a shell, you can enable verbose mode by
setting the SLURM_MEM_BIND environment variable value to &quot;verbose&quot;.
<P>
The following informational environment variables are set when
<B>--mem_bind</B> is in use:
<P>
<PRE>
        SLURM_MEM_BIND_VERBOSE
        SLURM_MEM_BIND_TYPE
        SLURM_MEM_BIND_LIST
</PRE>

<P>
See the <B>ENVIRONMENT VARIABLES</B> section for a more detailed description
of the individual SLURM_MEM_BIND* variables.
<P>
Supported options include:
<DL COMPACT><DT><DD>
<DL COMPACT>
<a id="OPT_q[uiet]"></a>
<DT><B>q[uiet]</B>

<DD>
quietly bind before task runs (default)
<a id="OPT_v[erbose]"></a>
<DT><B>v[erbose]</B>

<DD>
verbosely report binding before task runs
<a id="OPT_no[ne]"></a>
<DT><B>no[ne]</B>

<DD>
don't bind tasks to memory (default)
<a id="OPT_rank"></a>
<DT><B>rank</B>

<DD>
bind by task rank (not recommended)
<a id="OPT_local"></a>
<DT><B>local</B>

<DD>
Use memory local to the processor in use
<a id="OPT_map_mem:&lt;list&gt;"></a>
<DT><B>map_mem:&lt;list&gt;</B>

<DD>
bind by mapping a node's memory to tasks as specified
where &lt;list&gt; is &lt;cpuid1&gt;,&lt;cpuid2&gt;,...&lt;cpuidN&gt;.
CPU IDs are interpreted as decimal values unless they are preceded
with '0x' in which case they interpreted as hexadecimal values
(not recommended)
<a id="OPT_mask_mem:&lt;list&gt;"></a>
<DT><B>mask_mem:&lt;list&gt;</B>

<DD>
bind by setting memory masks on tasks as specified
where &lt;list&gt; is &lt;mask1&gt;,&lt;mask2&gt;,...&lt;maskN&gt;.
memory masks are <B>always</B> interpreted as hexadecimal values.
Note that masks must be preceded with a '0x' if they don't begin
with [0-9] so they are seen as numerical values by srun.
<a id="OPT_help"></a>
<DT><B>help</B>

<DD>
show this help message
</DL>
</DL>

<P>
<a id="OPT_mincpus"></a>
<DT><B>--mincpus</B>=&lt;<I>n</I>&gt;<DD>
Specify a minimum number of logical cpus/processors per node.
<P>
<a id="OPT_nodes"></a>
<DT><B>-N</B>, <B>--nodes</B>=&lt;<I>minnodes</I>[-<I>maxnodes</I>]&gt;<DD>
Request that a minimum of <I>minnodes</I> nodes be allocated to this job.
A maximum node count may also be specified with <I>maxnodes</I>.
If only one number is specified, this is used as both the minimum and
maximum node count.
The partition's node limits supersede those of the job.
If a job's node limits are outside of the range permitted for its
associated partition, the job will be left in a PENDING state.
This permits possible execution at a later time, when the partition
limit is changed.
If a job node limit exceeds the number of nodes configured in the
partition, the job will be rejected.
Note that the environment
variable <B>SLURM_NNODES</B> will be set to the count of nodes actually
allocated to the job. See the <B>ENVIRONMENT VARIABLES </B> section
for more information.  If <B>-N</B> is not specified, the default
behavior is to allocate enough nodes to satisfy the requirements of
the <B>-n</B> and <B>-c</B> options.
The job will be allocated as many nodes as possible within the range specified
and without delaying the initiation of the job.
The node count specification may include a numeric value followed by a suffix
of &quot;k&quot; (multiplies numeric value by 1,024) or &quot;m&quot; (multiplies numeric value by
1,048,576).
<P>
<a id="OPT_ntasks"></a>
<DT><B>-n</B>, <B>--ntasks</B>=&lt;<I>number</I>&gt;<DD>
sbatch does not launch tasks, it requests an allocation of resources and
submits a batch script. This option advises the SLURM controller that job
steps run within the allocation will launch a maximum of <I>number</I>
tasks and to provide for sufficient resources.
The default is one task per node, but note
that the <B>--cpus-per-task</B> option will change this default.
<P>
<a id="OPT_network"></a>
<DT><B>--network</B>=&lt;<I>type</I>&gt;<DD>
Specify the communication protocol to be used.
This option is supported on AIX systems.
Since POE is used to launch tasks, this option is not normally used or
is specified using the <B>SLURM_NETWORK</B> environment variable.
The interpretation of <I>type</I> is system dependent.
For systems with an IBM Federation switch, the following
comma-separated and case insensitive types are recognized:
<B>IP</B> (the default is user-space), <B>SN_ALL</B>, <B>SN_SINGLE</B>,
<B>BULK_XFER</B> and adapter names  (e.g. <B>SNI0</B> and <B>SNI1</B>).
For more information, on IBM systems see <I>poe</I> documentation on
the environment variables <B>MP_EUIDEVICE</B> and <B>MP_USE_BULK_XFER</B>.
Note that only four jobs steps may be active at once on a node with the
<B>BULK_XFER</B> option due to limitations in the Federation switch driver.
<P>
<a id="OPT_nice"></a>
<DT><B>--nice</B>[=<I>adjustment</I>]<DD>
Run the job with an adjusted scheduling priority within SLURM.
With no adjustment value the scheduling priority is decreased
by 100. The adjustment range is from -10000 (highest priority)
to 10000 (lowest priority). Only privileged users can specify
a negative adjustment. NOTE: This option is presently
ignored if <I>SchedulerType=sched/wiki</I> or
<I>SchedulerType=sched/wiki2</I>.
<P>
<a id="OPT_no-requeue"></a>
<DT><B>--no-requeue</B><DD>
Specifies that the batch job should not be requeued after node failure.
Setting this option will prevent system administrators from being able
to restart the job (for example, after a scheduled downtime).
When a job is requeued, the batch script is initiated from its beginning.
Also see the <B>--requeue</B> option.
The <I>JobRequeue</I> configuration parameter controls the default
behavior on the cluster.
<P>
<a id="OPT_ntasks-per-core"></a>
<DT><B>--ntasks-per-core</B>=&lt;<I>ntasks</I>&gt;<DD>
Request the maximum <I>ntasks</I> be invoked on each core.
Meant to be used with the <B>--ntasks</B> option.
Related to <B>--ntasks-per-node</B> except at the core level
instead of the node level.  Masks will automatically be generated
to bind the tasks to specific core unless <B>--cpu_bind=none</B>
is specified.
NOTE: This option is not supported unless
<I>SelectTypeParameters=CR_Core</I> or
<I>SelectTypeParameters=CR_Core_Memory</I> is configured.
<P>
<a id="OPT_ntasks-per-socket"></a>
<DT><B>--ntasks-per-socket</B>=&lt;<I>ntasks</I>&gt;<DD>
Request the maximum <I>ntasks</I> be invoked on each socket.
Meant to be used with the <B>--ntasks</B> option.
Related to <B>--ntasks-per-node</B> except at the socket level
instead of the node level.  Masks will automatically be generated
to bind the tasks to specific sockets unless <B>--cpu_bind=none</B>
is specified.
NOTE: This option is not supported unless
<I>SelectTypeParameters=CR_Socket</I> or
<I>SelectTypeParameters=CR_Socket_Memory</I> is configured.
<P>
<a id="OPT_ntasks-per-node"></a>
<DT><B>--ntasks-per-node</B>=&lt;<I>ntasks</I>&gt;<DD>
Request the maximum <I>ntasks</I> be invoked on each node.
Meant to be used with the <B>--nodes</B> option.
This is related to <B>--cpus-per-task</B>=<I>ncpus</I>,
but does not require knowledge of the actual number of cpus on
each node.  In some cases, it is more convenient to be able to
request that no more than a specific number of tasks be invoked
on each node.  Examples of this include submitting
a hybrid MPI/OpenMP app where only one MPI &quot;task/rank&quot; should be
assigned to each node while allowing the OpenMP portion to utilize
all of the parallelism present in the node, or submitting a single
setup/cleanup/monitoring job to each node of a pre-existing
allocation as one step in a larger job script.
<P>
<a id="OPT_overcommit"></a>
<DT><B>-O</B>, <B>--overcommit</B><DD>
Overcommit resources.  Normally, <B>sbatch</B> will allocate one task
per processor.  By specifying <B>--overcommit</B> you are explicitly
allowing more than one task per processor.  However no more than
<B>MAX_TASKS_PER_NODE</B> tasks are permitted to execute per node.
<P>
<a id="OPT_output"></a>
<DT><B>-o</B>, <B>--output</B>=&lt;<I>filename pattern</I>&gt;<DD>
Instruct SLURM to connect the batch script's standard output directly to the
file name specified in the &quot;<I>filename pattern</I>&quot;.
By default both standard output and standard error are directed to a file of
the name &quot;slurm-%j.out&quot;, where the &quot;%j&quot; is replaced with the job allocation
number.
See the <B>--input</B> option for filename specification options.
<P>
<a id="OPT_open-mode"></a>
<DT><B>--open-mode</B>=append|truncate<DD>
Open the output and error files using append or truncate mode as specified.
The default value is specified by the system configuration parameter
<I>JobFileAppend</I>.
<P>
<a id="OPT_partition"></a>
<DT><B>-p</B>, <B>--partition</B>=&lt;<I>partition_names</I>&gt;<DD>
Request a specific partition for the resource allocation.  If not specified,
the default behavior is to allow the slurm controller to select the default
partition as designated by the system administrator. If the job can use more
than one partition, specify their names in a comma separate list and the one
offering earliest initiation will be used.
<P>
<a id="OPT_propagate"></a>
<DT><B>--propagate</B>[=<I>rlimits</I>]<DD>
Allows users to specify which of the modifiable (soft) resource limits
to propagate to the compute nodes and apply to their jobs.  If
<I>rlimits</I> is not specified, then all resource limits will be
propagated.
The following rlimit names are supported by Slurm (although some
options may not be supported on some systems):
<DL COMPACT><DT><DD>
<DL COMPACT>
<a id="OPT_ALL"></a>
<DT><B>ALL</B><DD>
All limits listed below
<a id="OPT_AS"></a>
<DT><B>AS</B><DD>
The maximum address space for a process
<a id="OPT_CORE"></a>
<DT><B>CORE</B><DD>
The maximum size of core file
<a id="OPT_CPU"></a>
<DT><B>CPU</B><DD>
The maximum amount of CPU time
<a id="OPT_DATA"></a>
<DT><B>DATA</B><DD>
The maximum size of a process's data segment
<a id="OPT_FSIZE"></a>
<DT><B>FSIZE</B><DD>
The maximum size of files created. Note that if the user sets FSIZE to less
than the current size of the slurmd.log, job launches will fail with 
a 'File size limit exceeded' error.
<a id="OPT_MEMLOCK"></a>
<DT><B>MEMLOCK</B><DD>
The maximum size that may be locked into memory
<a id="OPT_NOFILE"></a>
<DT><B>NOFILE</B><DD>
The maximum number of open files
<a id="OPT_NPROC"></a>
<DT><B>NPROC</B><DD>
The maximum number of processes available
<a id="OPT_RSS"></a>
<DT><B>RSS</B><DD>
The maximum resident set size
<a id="OPT_STACK"></a>
<DT><B>STACK</B><DD>
The maximum stack size
</DL>
</DL>

<P>
<a id="OPT_quiet"></a>
<DT><B>-Q</B>, <B>--quiet</B><DD>
Suppress informational messages from sbatch. Errors will still be displayed.
<P>
<a id="OPT_qos"></a>
<DT><B>--qos</B>=&lt;<I>qos</I>&gt;<DD>
Request a quality of service for the job.  QOS values can be defined
for each user/cluster/account association in the SLURM database.
Users will be limited to their association's defined set of qos's when
the SLURM configuration parameter, AccountingStorageEnforce, includes
&quot;qos&quot; in it's definition.
<P>
<a id="OPT_requeue"></a>
<DT><B>--requeue</B><DD>
Specifies that the batch job should be requeued after node failure.
When a job is requeued, the batch script is initiated from its beginning.
Also see the <B>--no-requeue</B> option.
The <I>JobRequeue</I> configuration parameter controls the default
behavior on the cluster.
<P>
<a id="OPT_reservation"></a>
<DT><B>--reservation</B>=&lt;<I>name</I>&gt;<DD>
Allocate resources for the job from the named reservation.
<P>
<a id="OPT_share"></a>
<DT><B>-s</B>, <B>--share</B><DD>
The job allocation can share nodes with other running jobs.
This is the opposite of --exclusive, whichever option is seen last
on the command line will be used. The default shared/exclusive
behavior depends on system configuration and the partition's <B>Shared</B>
option takes precedence over the job's option.
This option may result the allocation being granted sooner than if the --share
option was not set and allow higher system utilization, but application
performance will likely suffer due to competition for resources within a node.
<P>
<a id="OPT_signal"></a>
<DT><B>--signal</B>=&lt;<I>sig_num</I>&gt;[@&lt;<I>sig_time</I>&gt;]<DD>
When a job is within <I>sig_time</I> seconds of its end time,
send it the signal <I>sig_num</I>.
Due to the resolution of event handling by SLURM, the signal may
be sent up to 60 seconds earlier than specified.
<I>sig_num</I> may either be a signal number or name (e.g. &quot;10&quot; or &quot;USR1&quot;).
<I>sig_time</I> must have integer value between zero and 65535.
By default, no signal is sent before the job's end time.
If a <I>sig_num</I> is specified without any <I>sig_time</I>,
the default time will be 60 seconds.
<P>
<a id="OPT_sockets-per-node"></a>
<DT><B>--sockets-per-node</B>=&lt;<I>sockets</I>&gt;<DD>
Restrict node selection to nodes with at least the specified number of
sockets.  See additional information under <B>-B</B> option above when
task/affinity plugin is enabled.
<P>
<a id="OPT_switch"></a>
<DT><B>--switch</B>=&lt;<I>count</I>&gt;[@&lt;<I>max-time</I>&gt;]<DD>
When a tree topology is used, this defines the maximum count of switches
desired for the job allocation and optionally the maximum time to wait
for that number of switches. If SLURM finds an allocation containing more
switches than the count specified, the job remain pending until it either finds
an allocation with desired switch count or the time limit expires. By default
there is no switch count limit and there is no delay in starting the job.
The job's maximum time delay may be limited by the system administrator using
the <B>SchedulerParameters</B> configuration parameter with the
<B>max_switch_wait</B> parameter option.
<P>
<a id="OPT_time"></a>
<DT><B>-t</B>, <B>--time</B>=&lt;<I>time</I>&gt;<DD>
Set a limit on the total run time of the job allocation.  If the
requested time limit exceeds the partition's time limit, the job will
be left in a PENDING state (possibly indefinitely).  The default time
limit is the partition's time limit.  When the time limit is reached,
each task in each job step is sent SIGTERM followed by SIGKILL.  The
interval between signals is specified by the SLURM configuration
parameter <B>KillWait</B>.  A time limit of zero requests that no time
limit be imposed.  Acceptable time formats include &quot;minutes&quot;,
&quot;minutes:seconds&quot;, &quot;hours:minutes:seconds&quot;, &quot;days-hours&quot;,
&quot;days-hours:minutes&quot; and &quot;days-hours:minutes:seconds&quot;.
<P>
<a id="OPT_tasks-per-node"></a>
<DT><B>--tasks-per-node</B>=&lt;<I>n</I>&gt;<DD>
Specify the number of tasks to be launched per node.
Equivalent to <B>--ntasks-per-node</B>.
<P>
<a id="OPT_threads-per-core"></a>
<DT><B>--threads-per-core</B>=&lt;<I>threads</I>&gt;<DD>
Restrict node selection to nodes with at least the specified number of
threads per core.  See additional information under <B>-B</B> option
above when task/affinity plugin is enabled.
<P>
<a id="OPT_time-min"></a>
<DT><B>--time-min</B>=&lt;<I>time</I>&gt;<DD>
Set a minimum time limit on the job allocation.
If specified, the job may have it's <B>--time</B> limit lowered to a value
no lower than <B>--time-min</B> if doing so permits the job to begin
execution earlier than otherwise possible. 
The job's time limit will not be changed after the job is allocated resources.
This is performed by a backfill scheduling algorithm to allocate resources 
otherwise reserved for higher priority jobs.
Acceptable time formats include &quot;minutes&quot;, &quot;minutes:seconds&quot;, 
&quot;hours:minutes:seconds&quot;, &quot;days-hours&quot;, &quot;days-hours:minutes&quot; and 
&quot;days-hours:minutes:seconds&quot;.
<P>
<a id="OPT_tmp"></a>
<DT><B>--tmp</B>=&lt;<I>MB</I>&gt;<DD>
Specify a minimum amount of temporary disk space.
<P>
<a id="OPT_usage"></a>
<DT><B>-u</B>, <B>--usage</B><DD>
Display brief help message and exit.
<P>
<a id="OPT_uid"></a>
<DT><B>--uid</B>=&lt;<I>user</I>&gt;<DD>
Attempt to submit and/or run a job as <I>user</I> instead of the
invoking user id. The invoking user's credentials will be used
to check access permissions for the target partition. User root
may use this option to run jobs as a normal user in a RootOnly
partition for example. If run as root, <B>sbatch</B> will drop
its permissions to the uid specified after node allocation is
successful. <I>user</I> may be the user name or numerical user ID.
<P>
<a id="OPT_version"></a>
<DT><B>-V</B>, <B>--version</B><DD>
Display version information and exit.
<P>
<a id="OPT_verbose"></a>
<DT><B>-v</B>, <B>--verbose</B><DD>
Increase the verbosity of sbatch's informational messages.  Multiple
<B>-v</B>'s will further increase sbatch's verbosity.  By default only
errors will be displayed.
<P>
<a id="OPT_nodelist"></a>
<DT><B>-w</B>, <B>--nodelist</B>=&lt;<I>node name list</I>&gt;<DD>
Request a specific list of node names.  The list may be specified as a
comma-separated list of node names, or a range of node names
(e.g. mynode[1-5,7,...]).  Duplicate node names in the list will be ignored.
The order of the node names in the list is not important; the node names
will be sorted by SLURM.
<P>
<a id="OPT_wait-all-nodes"></a>
<DT><B>--wait-all-nodes</B>=&lt;<I>value</I>&gt;<DD>
Controls when the execution of the command begins.
By default the job will begin execution as soon as the allocation is made.
<DL COMPACT><DT><DD>
<DL COMPACT>
<DT>0<DD>
Begin execution as soon as allocation can be made.
Do not wait for all nodes to be ready for use (i.e. booted).
<DT>1<DD>
Do not begin execution until all nodes are ready for use.
</DL>
</DL>

<P>
<a id="OPT_wckey"></a>
<DT><B>--wckey</B>=&lt;<I>wckey</I>&gt;<DD>
Specify wckey to be used with job.  If TrackWCKey=no (default) in the
slurm.conf this value is ignored.
<P>
<a id="OPT_wrap"></a>
<DT><B>--wrap</B>=&lt;<I>command string</I>&gt;<DD>
Sbatch will wrap the specified command string in a simple &quot;sh&quot; shell script,
and submit that script to the slurm controller.  When --wrap is used,
a script name and arguments may not be specified on the command line; instead
the sbatch-generated wrapper script is used.
<P>
<a id="OPT_exclude"></a>
<DT><B>-x</B>, <B>--exclude</B>=&lt;<I>node name list</I>&gt;<DD>
Explicitly exclude certain nodes from the resources granted to the job.
<P>
</DL>
<P>

The following options support Blue Gene systems, but may be
applicable to other systems as well.
<P>
<DL COMPACT>
<a id="OPT_blrts-image"></a>
<DT><B>--blrts-image</B>=&lt;<I>path</I>&gt;<DD>
Path to Blue Gene/L Run Time Supervisor, or blrts, image for bluegene block.  BGL only.
Default from <I>blugene.conf</I> if not set.
<P>
<a id="OPT_cnload-image"></a>
<DT><B>--cnload-image</B>=&lt;<I>path</I>&gt;<DD>
Path to compute node image for bluegene block.  BGP only.
Default from <I>blugene.conf</I> if not set.
<P>
<a id="OPT_conn-type"></a>
<DT><B>--conn-type</B>=&lt;<I>type</I>&gt;<DD>
Require the partition connection type to be of a certain type.
On Blue Gene the acceptable of <I>type</I> are MESH, TORUS and NAV.
If NAV, or if not set, then SLURM will try to fit a TORUS else MESH.
You should not normally set this option.
SLURM will normally allocate a TORUS if possible for a given geometry.
If running on a BGP system and wanting to run in HTC mode (only for 1
midplane and below).  You can use HTC_S for SMP, HTC_D for Dual, HTC_V
for virtual node mode, and HTC_L for Linux mode.
A comma separated lists of connection types may be specified, one for each dimension.
<P>
<a id="OPT_geometry"></a>
<DT><B>-g</B>, <B>--geometry</B>=&lt;<I>XxYxZ</I>&gt;<DD>
Specify the geometry requirements for the job. The three numbers
represent the required geometry giving dimensions in the X, Y and
Z directions. For example &quot;--geometry=2x3x4&quot;, specifies a block
of nodes having 2 x 3 x 4 = 24 nodes (actually base partitions on
Blue Gene).
<P>
<a id="OPT_ioload-image"></a>
<DT><B>--ioload-image</B>=&lt;<I>path</I>&gt;<DD>
Path to io image for bluegene block.  BGP only.
Default from <I>blugene.conf</I> if not set.
<P>
<a id="OPT_linux-image"></a>
<DT><B>--linux-image</B>=&lt;<I>path</I>&gt;<DD>
Path to linux image for bluegene block.  BGL only.
Default from <I>blugene.conf</I> if not set.
<P>
<a id="OPT_mloader-image"></a>
<DT><B>--mloader-image</B>=&lt;<I>path</I>&gt;<DD>
Path to mloader image for bluegene block.
Default from <I>blugene.conf</I> if not set.
<P>
<a id="OPT_no-rotate"></a>
<DT><B>-R</B>, <B>--no-rotate</B><DD>
Disables rotation of the job's requested geometry in order to fit an
appropriate block.
By default the specified geometry can rotate in three dimensions.
<P>
<a id="OPT_ramdisk-image"></a>
<DT><B>--ramdisk-image</B>=&lt;<I>path</I>&gt;<DD>
Path to ramdisk image for bluegene block.  BGL only.
Default from <I>blugene.conf</I> if not set.
<P>
<a id="OPT_reboot"></a>
<DT><B>--reboot</B><DD>
Force the allocated nodes to reboot before starting the job.
<P>
</DL>
<A NAME="lbAF">&nbsp;</A>
<a id="SECTION_INPUT ENVIRONMENT VARIABLES"></a>
<H2>INPUT ENVIRONMENT VARIABLES</H2>

<P>

Upon startup, sbatch will read and handle the options set in the following
environment variables.  Note that environment variables will override any
options set in a batch script, and command line options will override any
environment variables.
<P>
<DL COMPACT>
<a id="OPT_SBATCH_ACCOUNT"></a>
<DT><B>SBATCH_ACCOUNT</B><DD>
Same as <B>-A, --account</B>
<a id="OPT_SBATCH_ACCTG_FREQ"></a>
<DT><B>SBATCH_ACCTG_FREQ</B><DD>
Same as <B>--acctg-freq</B>
<a id="OPT_SLURM_CHECKPOINT"></a>
<DT><B>SLURM_CHECKPOINT</B><DD>
Same as <B>--checkpoint</B>
<a id="OPT_SLURM_CHECKPOINT_DIR"></a>
<DT><B>SLURM_CHECKPOINT_DIR</B><DD>
Same as <B>--checkpoint-dir</B>
<a id="OPT_SBATCH_CLUSTERS"></a>
<DT><B>SBATCH_CLUSTERS</B> or <B>SLURM_CLUSTERS</B><DD>
Same as <B>--clusters</B>
<a id="OPT_SBATCH_CONN_TYPE"></a>
<DT><B>SBATCH_CONN_TYPE</B><DD>
Same as <B>--conn-type</B>
<a id="OPT_SBATCH_CPU_BIND"></a>
<DT><B>SBATCH_CPU_BIND</B><DD>
Same as <B>--cpu_bind</B>
<a id="OPT_SBATCH_DEBUG"></a>
<DT><B>SBATCH_DEBUG</B><DD>
Same as <B>-v, --verbose</B>
<a id="OPT_SBATCH_DISTRIBUTION"></a>
<DT><B>SBATCH_DISTRIBUTION</B><DD>
Same as <B>-m, --distribution</B>
<a id="OPT_SBATCH_EXCLUSIVE"></a>
<DT><B>SBATCH_EXCLUSIVE</B><DD>
Same as <B>--exclusive</B>
<a id="OPT_SLURM_EXIT_ERROR"></a>
<DT><B>SLURM_EXIT_ERROR</B><DD>
Specifies the exit code generated when a SLURM error occurs
(e.g. invalid options).
This can be used by a script to distinguish application exit codes from
various SLURM error conditions.
<a id="OPT_SBATCH_EXPORT"></a>
<DT><B>SBATCH_EXPORT</B><DD>
Same as <B>--export</B>
<a id="OPT_SBATCH_GEOMETRY"></a>
<DT><B>SBATCH_GEOMETRY</B><DD>
Same as <B>-g, --geometry</B>
<a id="OPT_SBATCH_IMMEDIATE"></a>
<DT><B>SBATCH_IMMEDIATE</B><DD>
Same as <B>-I, --immediate</B>
<a id="OPT_SBATCH_JOBID"></a>
<DT><B>SBATCH_JOBID</B><DD>
Same as <B>--jobid</B>
<a id="OPT_SBATCH_JOB_NAME"></a>
<DT><B>SBATCH_JOB_NAME</B><DD>
Same as <B>-J, --job-name</B>
<a id="OPT_SBATCH_MEM_BIND"></a>
<DT><B>SBATCH_MEM_BIND</B><DD>
Same as <B>--mem_bind</B>
<a id="OPT_SBATCH_NETWORK"></a>
<DT><B>SBATCH_NETWORK</B><DD>
Same as <B>--network</B>
<a id="OPT_SBATCH_NO_REQUEUE"></a>
<DT><B>SBATCH_NO_REQUEUE</B><DD>
Same as <B>--no-requeue</B>
<a id="OPT_SBATCH_NO_ROTATE"></a>
<DT><B>SBATCH_NO_ROTATE</B><DD>
Same as <B>-R, --no-rotate</B>
<a id="OPT_SBATCH_OPEN_MODE"></a>
<DT><B>SBATCH_OPEN_MODE</B><DD>
Same as <B>--open-mode</B>
<a id="OPT_SBATCH_OVERCOMMIT"></a>
<DT><B>SBATCH_OVERCOMMIT</B><DD>
Same as <B>-O, --overcommit</B>
<a id="OPT_SBATCH_PARTITION"></a>
<DT><B>SBATCH_PARTITION</B><DD>
Same as <B>-p, --partition</B>
<a id="OPT_SBATCH_QOS"></a>
<DT><B>SBATCH_QOS</B><DD>
Same as <B>--qos</B>
<a id="OPT_SBATCH_SIGNAL"></a>
<DT><B>SBATCH_SIGNAL</B><DD>
Same as <B>--signal</B>
<a id="OPT_SBATCH_TIMELIMIT"></a>
<DT><B>SBATCH_TIMELIMIT</B><DD>
Same as <B>-t, --time</B>
<a id="OPT_SBATCH_WAIT_ALL_NODES"></a>
<DT><B>SBATCH_WAIT_ALL_NODES</B><DD>
Same as <B>--wait-all-nodes</B>
<P>
</DL>
<A NAME="lbAG">&nbsp;</A>
<a id="SECTION_OUTPUT ENVIRONMENT VARIABLES"></a>
<H2>OUTPUT ENVIRONMENT VARIABLES</H2>

<P>

The SLURM controller will set the following variables in the environment of
the batch script.
<DL COMPACT>
<a id="OPT_BASIL_RESERVATION_ID"></a>
<DT><B>BASIL_RESERVATION_ID</B><DD>
The reservation ID on Cray systems running ALPS/BASIL only.
<a id="OPT_SLURM_CPU_BIND"></a>
<DT><B>SLURM_CPU_BIND</B><DD>
Set to value of the --cpu_bind option.
<a id="OPT_SLURM_JOB_ID"></a>
<DT><B>SLURM_JOB_ID</B> (and <B>SLURM_JOBID</B> for backwards compatibility)<DD>
The ID of the job allocation.
<a id="OPT_SLURM_JOB_CPUS_PER_NODE"></a>
<DT><B>SLURM_JOB_CPUS_PER_NODE</B><DD>
Count of processors available to the job on this node.
Note the select/linear plugin allocates entire nodes to
jobs, so the value indicates the total count of CPUs on the node.
The select/cons_res plugin allocates individual processors
to jobs, so this number indicates the number of processors
on this node allocated to the job.
<a id="OPT_SLURM_JOB_DEPENDENCY"></a>
<DT><B>SLURM_JOB_DEPENDENCY</B><DD>
Set to value of the --dependency option.
<a id="OPT_SLURM_JOB_NAME"></a>
<DT><B>SLURM_JOB_NAME</B><DD>
Name of the job.
<a id="OPT_SLURM_JOB_NODELIST"></a>
<DT><B>SLURM_JOB_NODELIST</B> (and <B>SLURM_NODELIST</B> for backwards compatibility)<DD>
List of nodes allocated to the job.
<a id="OPT_SLURM_JOB_NUM_NODES"></a>
<DT><B>SLURM_JOB_NUM_NODES</B> (and <B>SLURM_NNODES</B> for backwards compatibility)<DD>
Total number of nodes in the job's resource allocation.
<a id="OPT_SLURM_MEM_BIND"></a>
<DT><B>SLURM_MEM_BIND</B><DD>
Set to value of the --mem_bind option.
<a id="OPT_SLURM_TASKS_PER_NODE"></a>
<DT><B>SLURM_TASKS_PER_NODE</B><DD>
Number of tasks to be initiated on each node. Values are
comma separated and in the same order as SLURM_NODELIST.
If two or more consecutive nodes are to have the same task
count, that count is followed by &quot;(x#)&quot; where &quot;#&quot; is the
repetition count. For example, &quot;SLURM_TASKS_PER_NODE=2(x3),1&quot;
indicates that the first three nodes will each execute three
tasks and the fourth node will execute one task.
<a id="OPT_MPIRUN_NOALLOCATE"></a>
<DT><B>MPIRUN_NOALLOCATE</B><DD>
Do not allocate a block on Blue Gene systems only.
<a id="OPT_MPIRUN_NOFREE"></a>
<DT><B>MPIRUN_NOFREE</B><DD>
Do not free a block on Blue Gene systems only.
<a id="OPT_SLURM_NTASKS_PER_CORE"></a>
<DT><B>SLURM_NTASKS_PER_CORE</B><DD>
Number of tasks requested per core.
Only set if the <B>--ntasks-per-core</B> option is specified.
<a id="OPT_SLURM_NTASKS_PER_NODE"></a>
<DT><B>SLURM_NTASKS_PER_NODE</B><DD>
Number of tasks requested per node.
Only set if the <B>--ntasks-per-node</B> option is specified.
<a id="OPT_SLURM_NTASKS_PER_SOCKET"></a>
<DT><B>SLURM_NTASKS_PER_SOCKET</B><DD>
Number of tasks requested per socket.
Only set if the <B>--ntasks-per-socket</B> option is specified.
<a id="OPT_SLURM_RESTART_COUNT"></a>
<DT><B>SLURM_RESTART_COUNT</B><DD>
If the job has been restarted due to system failure or has been
explicitly requeued, this will be sent to the number of times
the job has been restarted.
<a id="OPT_SLURM_SUBMIT_DIR"></a>
<DT><B>SLURM_SUBMIT_DIR</B><DD>
The directory from which <B>sbatch</B> was invoked.
<a id="OPT_MPIRUN_PARTITION"></a>
<DT><B>MPIRUN_PARTITION</B><DD>
The block name on Blue Gene systems only.
<P>
</DL>
<A NAME="lbAH">&nbsp;</A>
<a id="SECTION_EXAMPLES"></a>
<H2>EXAMPLES</H2>

<P>

Specify a batch script by filename on the command line.
The batch script specifies a 1 minute time limit for the job.
<DL COMPACT>
<DT><DD>
$ cat myscript
<BR>

#!/bin/sh
<BR>

#SBATCH --time=1
<BR>

srun hostname |sort
<BR>

<P>
<BR>

$ sbatch -N4 myscript
<BR>

salloc: Granted job allocation 65537
<BR>

<P>
<BR>

$ cat slurm-65537.out
<BR>

host1
<BR>

host2
<BR>

host3
<BR>

host4
<P>
</DL>
<P>

Pass a batch script to sbatch on standard input:
<DL COMPACT>
<DT><DD>
$ sbatch -N4 &lt;&lt;EOF
<BR>

&gt; #!/bin/sh
<BR>

&gt; srun hostname |sort
<BR>

&gt; EOF
<BR>

sbatch: Submitted batch job 65541
<BR>

<P>
<BR>

$ cat slurm-65541.out
<BR>

host1
<BR>

host2
<BR>

host3
<BR>

host4
<P>
</DL>
<A NAME="lbAI">&nbsp;</A>
<a id="SECTION_COPYING"></a>
<H2>COPYING</H2>

Copyright (C) 2006-2007 The Regents of the University of California.
Copyright (C) 2008-2010 Lawrence Livermore National Security.
Produced at Lawrence Livermore National Laboratory (cf, DISCLAIMER).
CODE-OCEC-09-009. All rights reserved.
<P>

This file is part of SLURM, a resource management program.
For details, see &lt;<A HREF="http://www.schedmd.com/slurmdocs/">http://www.schedmd.com/slurmdocs/</A>&gt;.
<P>

SLURM is free software; you can redistribute it and/or modify it under
the terms of the GNU General Public License as published by the Free
Software Foundation; either version 2 of the License, or (at your option)
any later version.
<P>

SLURM is distributed in the hope that it will be useful, but WITHOUT ANY
WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more
details.
<P>
<A NAME="lbAJ">&nbsp;</A>
<a id="SECTION_SEE ALSO"></a>
<H2>SEE ALSO</H2>

<P>

<B><A HREF="sinfo.html">sinfo</A></B>(1), <B><A HREF="sattach.html">sattach</A></B>(1), <B><A HREF="salloc.html">salloc</A></B>(1), <B><A HREF="squeue.html">squeue</A></B>(1), <B><A HREF="scancel.html">scancel</A></B>(1), <B><A HREF="scontrol.html">scontrol</A></B>(1),
<B><A HREF="slurm.conf.html">slurm.conf</A></B>(5), <B>sched_setaffinity</B> (2), <B>numa</B> (3)
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">OPTIONS</A><DD>
<DT><A HREF="#lbAF">INPUT ENVIRONMENT VARIABLES</A><DD>
<DT><A HREF="#lbAG">OUTPUT ENVIRONMENT VARIABLES</A><DD>
<DT><A HREF="#lbAH">EXAMPLES</A><DD>
<DT><A HREF="#lbAI">COPYING</A><DD>
<DT><A HREF="#lbAJ">SEE ALSO</A><DD>
</DL>
<HR>
This document was created by
<i>man2html</i> using the manual pages.<BR>
Time: 09:17:43 GMT, February 08, 2013
</div> <!-- closes "content" -->

<div id="footer">
<div id="left">&nbsp;&nbsp;<a href="disclaimer.html" target="_blank" class="privacy">Legal Notices</a></div>
<div id="right"><span class="ucrlnum">27 June 2011&nbsp;&nbsp;</span></div>
</div>

<div id="footer2">
<div style="clear:both;"></div>
</div>

</div> <!-- closes "container" -->

</body>
</html>
